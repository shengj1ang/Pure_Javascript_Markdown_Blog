---
date: '2022-03-12T14:34:00.011+01:00'
description: ''
published: true
slug: 2022-03-cloudflare-workers
tags:
- http://schemas.google.com/blogger/2008/kind#post
- legacy-blogger
time_to_read: 5
title: "\u901A\u8FC7Cloudflare Workers\u8F6C\u6362\u8BA2\u9605"
---

*This was originally posted on blogger [here](https://sheng-jiang.blogspot.com/2022/03/cloudflare-workers.html)*.

<p>&nbsp;我去年7月6号发布了个利用Python分享订阅的，其实部署起来非常不稳定。</p><p>所以我又弄了个基于Cloudflare Workers 的，很久以前就弄好了，但是忘了有这事，今天整理Blog，来补充一下。</p><p>这个意图是使被贡献者不用天天换订阅链接，只要workers里改改就行了。</p><p><br /></p><blockquote><div><div>addEventListener(<span style="color: #a31515;">"fetch"</span>, event =&gt; {</div><div>  event.respondWith(handleRequest(event.request))</div><div>})</div><div><span style="color: blue;">async</span> <span style="color: blue;">function</span> handleRequest(request) {</div><div>  <span style="color: blue;">let</span> { pathname } = <span style="color: blue;">new</span> <span style="color: teal;">URL</span>(request.url);</div><br /><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/example"</span>||pathname==<span style="color: #a31515;">"/example/"</span>) {</div><div>  <span style="color: blue;">return</span> <span style="color: blue;">new</span> <span style="color: teal;">Response</span>(<span style="color: #a31515;">"Hello worker!"</span>, { headers: { <span style="color: #a31515;">"content-type"</span>: <span style="color: #a31515;">"text/plain"</span> }})</div><div>  }</div><br /><div>  <span style="color: green;">//fast-fish</span></div><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/archived/fast-fish/v2ray"</span>||pathname==<span style="color: #a31515;">"/archived/fast-fish/v2ray/"</span>) {</div><div>      <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://bigairport.icu/api/v1/client/subscribe?token=98`</span>);</div><br /><div>  }  </div><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/fast-fish/v2ray"</span>||pathname==<span style="color: #a31515;">"/fast-fish/v2ray/"</span>||pathname==<span style="color: #a31515;">"/fast-fish/ssr"</span>||pathname==<span style="color: #a31515;">"/fast-fish/ssr/"</span>) {</div><div>    <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://bigairport.icu/api/v1/client/subscribe?token=98`</span>);</div><div>  }</div><div>  <span style="color: green;">//BridgeTheWise</span></div><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/bridgethewise"</span>||pathname==<span style="color: #a31515;">"/bridgethewise/"</span>||pathname==<span style="color: #a31515;">"/BridgeTheWise/"</span>||pathname==<span style="color: #a31515;">"/BridgeTheWise"</span>) {</div><div>  <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://bigairport.icu/api/v1/client/subscribe?token=98`</span>);</div><div>  }</div><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/bridgethewise/clash"</span>||pathname==<span style="color: #a31515;">"/bridgethewise/clash/"</span>||pathname==<span style="color: #a31515;">"/BridgeTheWise/clash"</span>||pathname==<span style="color: #a31515;">"/BridgeTheWise/clash/"</span>) {</div><div>  <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://sub.id9.cc/sub?target=clash&amp;new_name=true&amp;url=https%3A%2F%2Fsub.usercontent.workers.dev%2Fbridgethewise&amp;insert=false&amp;config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online.ini`</span>);</div><div>  }</div><br /><div>  <span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/clash"</span>||pathname==<span style="color: #a31515;">"/clash/"</span>||pathname==<span style="color: #a31515;">"/Clash"</span>||pathname==<span style="color: #a31515;">"/Clash/"</span>||pathname==<span style="color: #a31515;">"/fast-fish/clash.yaml"</span>||pathname==<span style="color: #a31515;">"/fast-fish/clash"</span>||pathname==<span style="color: #a31515;">"/fast-fish/clash/"</span>) {</div><div>  <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://sub.id9.cc/sub?target=clash&amp;new_name=true&amp;url=https%3A%2F%2Fsub.usercontent.workers.dev%2Fbridgethewise&amp;insert=false&amp;config=https%3A%2F%2Fraw.githubusercontent.com%2FACL4SSR%2FACL4SSR%2Fmaster%2FClash%2Fconfig%2FACL4SSR_Online.ini`</span>);</div><div>  }</div><br /><br /><div><span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/b"</span>||pathname==<span style="color: #a31515;">"/b/"</span>) {</div><div>  <span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://patriot.ninja//index.php?m=wray&amp;token=8`</span>);</div><div>  }</div><div><span style="color: green;">//default pages</span></div><div><span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/"</span>) {</div><div>  <span style="color: blue;">return</span> <span style="color: blue;">new</span> <span style="color: teal;">Response</span>(<span style="color: #a31515;">"Hello worker!\nService Status: Working"</span>, { headers: { <span style="color: #a31515;">"content-type"</span>: <span style="color: #a31515;">"text/plain"</span> }})</div><div>  <span style="color: green;">//return Response.redirect("https://github.com/freefq/free/blob/master/README.md", 301);</span></div><div>} </div><div><span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/robots.txt"</span>) {</div><div>  <span style="color: blue;">return</span> <span style="color: blue;">new</span> <span style="color: teal;">Response</span>(<span style="color: #a31515;">"User-agent:*\nallow:*"</span>, { headers: { <span style="color: #a31515;">"content-type"</span>: <span style="color: #a31515;">"text/plain"</span> }})</div><div>}  </div><div><span style="color: blue;">if</span> (pathname==<span style="color: #a31515;">"/about"</span>||pathname==<span style="color: #a31515;">"/about/"</span>) {</div><div>  <span style="color: blue;">return</span> <span style="color: blue;">new</span> <span style="color: teal;">Response</span>(<span style="color: #a31515;">"About Page  ---workers.dev"</span>, { headers: { <span style="color: #a31515;">"content-type"</span>: <span style="color: #a31515;">"text/plain"</span> }})</div><div>}  </div><div><span style="color: blue;">return</span> fetch(<span style="color: #a31515;">`https://raw.githubusercontent.com/aiboboxx/v2rayfree/main/v2`</span>);</div><div>}</div></div></blockquote><br /><br /><p></p><p></p><div class="separator" style="clear: both; text-align: center;"><div class="separator" style="clear: both; text-align: center;">workers复制一下就行了，单词很明显能体现出意思。</div></div><br /><div class="separator" style="clear: both; text-align: center;"><br /></div><br /><br /><p></p><p>基本上就是这样的。&nbsp;</p><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnfKTURBr3JdeiiUpN6i8ZV5_a5cxfe6eb08PPpzEph_KQpXoY56ws3xvood3hp_XWjpi0aocw5vmBtbs3QiGmuHyNa-Tr2DaRH2-dJHYLFnlM2vOdplMY_CGqc5yxlxeS5-2Z688LCieMiCS2vwUHRr8QDh9JvPWTqUSnko6be-WE_PTrrTBVg99f/s1076/Screenshot%202022-03-23%20at%2010.54.53%20AM.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="217" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhnfKTURBr3JdeiiUpN6i8ZV5_a5cxfe6eb08PPpzEph_KQpXoY56ws3xvood3hp_XWjpi0aocw5vmBtbs3QiGmuHyNa-Tr2DaRH2-dJHYLFnlM2vOdplMY_CGqc5yxlxeS5-2Z688LCieMiCS2vwUHRr8QDh9JvPWTqUSnko6be-WE_PTrrTBVg99f/s320/Screenshot%202022-03-23%20at%2010.54.53%20AM.png" width="320" /></a></div><br />