---
date: '2022-12-03T05:47:00.011+01:00'
description: ''
published: true
slug: 2022-12-php
tags:
- http://schemas.google.com/blogger/2008/kind#post
- legacy-blogger
time_to_read: 5
title: "PHP\u4E3A\u4EFB\u610F\u9875\u9762\u8BBE\u8BBF\u95EE\u5BC6\u7801\uFF0C\u9700\
  \u8981\u767B\u9646\u624D\u80FD\u8BBF\u95EE"
---

*This was originally posted on blogger [here](https://sheng-jiang.blogspot.com/2022/12/php.html)*.

<p><b>&nbsp;使用方法</b></p><p>把下面的代码存为php文件，下面的整段代码是验证过程，然后在你入口页进行调用例如命名为MkEncrypt.php，那么在入口页进行</p><pre style="background-color: #f5f7f8; border-radius: 0px; border: 0px; line-height: 20.8px; margin-bottom: 8px; margin-top: 2px; overflow: auto; padding: 18px;"><code>require_once('MkEncrypt.php');</code><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif"><br /></span></code></pre><div><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif">然后设置密码为 </span></code><code style="background-color: transparent; border-radius: 0px; border: 0px; line-height: 20.8px; padding: 0px;"><pre style="background-color: #f5f7f8; border-radius: 0px; border: 0px; line-height: 20.8px; margin-bottom: 8px; margin-top: 2px; overflow: auto; padding: 18px;"><code>MkEncrypt('1234');</code><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif"><br /></span></code></pre><div><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif"><br /></span></code></div><div><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif">密码正确才能进去页面，进入后会存下cookies值，下一次登录的时候则不需要再次输入了；如果不想给人看了，只需要更改密码，cookies就会立即失效，必须要重新登陆才能看。  <b>代码简介 </b>为你的页面 支持 加密访问 无论什么程序 只要是PHP程序 都是支持这代码的 来实现加密访问你的加密页面 或文章等等的页面 不保证其他程序可以正常使用 麻烦先测试！  <b>代码如下</b></span></code></div><div><code><pre><code>&lt;?php<br /><br />/********************************************<br /> * 使用方法:<br /> * <br /> * 1、将本段代码保存为 MkEncrypt.php<br /> * <br /> * 2、在要加密的页面前面引入这个 php 文件   <br /> *  require_once('MkEncrypt.php');<br /> * <br /> * 3、设置页面访问密码 <br /> *  MkEncrypt('页面密码');<br /> * <br />********************************************/<br /><br />// 密码 Cookie 加密钥<br />if(!defined('MK_ENCRYPT_SALT'))<br />    define('MK_ENCRYPT_SALT', 'K124g32gs$JCuogoeou!V');<br /><br />/**<br /> * 设置访问密码<br /> * <br /> * @param $password  访问密码<br /> * @param $pageid    页面唯一 ID 值，用于区分同一网站的不同加密页面<br /> */<br />function MkEncrypt($password, $pageid = 'default') {<br />    $pageid     = md5($pageid);<br />    $md5pw      = md5(md5($password).MK_ENCRYPT_SALT);<br />    $postpwd    = isset($_POST['pagepwd']) ? addslashes(trim($_POST['pagepwd'])) : '';<br />    $cookiepwd  = isset($_COOKIE['mk_encrypt_'.$pageid]) ? addslashes(trim($_COOKIE['mk_encrypt_'.$pageid])) : '';<br /><br />    if($cookiepwd == $md5pw) return;    // Cookie密码验证正确<br /><br />    if($postpwd == $password) {         // 提交的密码正确<br />        setcookie('mk_encrypt_' . $pageid, $md5pw, time() + 3600000, '/');<br /><br />		header("location:".$_SERVER['HTTP_REFERER']);<br />		exit;<br /><br />        //return;<br />    }<br />?&gt;<br />&lt;html&gt;<br />&lt;head&gt;<br />    &lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt; <br />    &lt;meta charset="UTF-8"&gt; <br />    &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt; <br />    &lt;meta name="renderer" content="webkit"&gt; <br />    &lt;meta name="author" content="mengkun"&gt;<br />    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"&gt;<br />    &lt;title&gt;403&lt;/title&gt;<br />    &lt;style type="text/css"&gt;<br />    *{font-family:"Microsoft Yahei",微软雅黑,"Helvetica Neue",Helvetica,"Hiragino Sans GB","WenQuanYi Micro Hei",sans-serif;box-sizing:border-box;margin:0px;padding:0px;font-size:14px;-webkit-transition:.2s;-moz-transition:.2s;-ms-transition:.2s;-o-transition:.2s;transition:.2s}<br />    html,body{width:100%;height:100%}<br />    body{background-color:#F4F6F9;color:#768093}<br />    input,button{font-size:1em;border-radius:3px;-webkit-appearance:none}<br />    input{width:100%;padding:5px;box-sizing:border-box;border:1px solid #e5e9ef;background-color:#f4f5f7;resize:vertical}<br />    input:focus{background-color:#fff;outline:none}<br />    button{border:0;background:#6abd09;color:#fff;cursor:pointer;opacity:1;user-select:none}<br />    button:hover,button:focus{opacity:.9}<br />    button:active{opacity:1}<br />    .main{width:100%;max-width:500px;height:300px;padding:30px;background-color:#fff;border-radius:2px;box-shadow:0 10px 60px 0 rgba(29,29,31,0.09);transition:all .12s ease-out;position:absolute;left:0;top:0;bottom:0;right:0;margin:auto;text-align:center}<br />    .alert{width:80px}<br />    .mk-side-form{margin-bottom:28px}<br />    .mk-side-form input{float:left;padding:2px 10px;width:77%;height:37px;border:1px solid #ebebeb;border-right-color:transparent;border-radius:2px 0 0 2px;line-height:37px}<br />    .mk-side-form button{position:relative;overflow:visible;width:23%;height:37px;border-radius:0 2px 2px 0;text-transform:uppercase}<br />    .pw-tip{font-weight:normal;font-size:26px;text-align:center;margin:25px auto}<br />    #pw-error {color: red;margin-top: 15px;margin-bottom: -20px;}<br />    .return-home{text-decoration:none;color:#b1b1b1;font-size:16px}<br />    .return-home:hover{color:#1E9FFF;letter-spacing:5px}<br />    &lt;/style&gt;<br />&lt;/head&gt;<br />&lt;body&gt;<br />    &lt;div class="main"&gt;<br />        &lt;svg class="alert" viewBox="0 0 1084 1024" xmlns="http://www.w3.org/2000/svg" width="80" height="80"&gt;<br />            &lt;defs&gt;&lt;style/&gt;&lt;/defs&gt;<br />            &lt;path d="M1060.744 895.036L590.547 80.656a55.959 55.959 0 0 0-96.919 0L22.588 896.662a55.959 55.959 0 0 0 48.43 83.907h942.14a55.959 55.959 0 0 0 47.525-85.534zm-470.619-85.172a48.008 48.008 0 1 1-96.015 0v-1.567a48.008 48.008 0 1 1 96.015 0v1.567zm0-175.345a48.008 48.008 0 1 1-96.015 0V379.362a48.008 48.008 0 1 1 96.015 0v255.157z" fill="#FF9800"/&gt;<br />        &lt;/svg&gt;<br /><br />        &lt;form action="" method="post" class="mk-side-form"&gt;<br />            &lt;h2 class="pw-tip"&gt;Login&lt;/h2&gt;<br />            &lt;input type="password" name="pagepwd" placeholder="" required&gt;&lt;button type="submit"&gt;Submit&lt;/button&gt;<br />            &lt;?php if($postpwd): ?&gt;<br />            &lt;p id="pw-error"&gt;Incorrect&lt;/p&gt;<br />            &lt;script&gt;setTimeout(function() {document.getElementById("pw-error").style.display = "none"}, 2000);&lt;/script&gt;<br />            &lt;?php endif; ?&gt;<br />        &lt;/form&gt;<br />        &lt;a href="/" class="return-home" title="Home"&gt;- Home - &lt;/a&gt;<br />    &lt;/div&gt;<br />&lt;/body&gt;<br />&lt;/html&gt;<br />&lt;?php<br /><br />    exit();<br />}</code></pre></code></div><div><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif"><b><br /></b></span></code></div><div><br /></div><div>Refer:&nbsp;<a href="https://cloud.tencent.com/developer/article/1905120" target="_blank">https://cloud.tencent.com/developer/article/1905120</a></div><div>稍微修改了下。</div><div><br /></div><div class="separator" style="clear: both; text-align: center;"><a href="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8ky9nTM8bwdo9zj71ugoGMTADn4brscR1CXFf0UOZbW_rK_8vX0rioxAVk_eEqimaSMFmR0p6KrX6wFp67v9BnhbBcrSpZMXBhWFN6SMGFLCvD6u1t7KlmGG3uNgR6hyeNg49HT_0vdINlhiiMmW-jjqYPpwcuZ9kbhGBSOUUpKL4j0BAi0jGSxRW/s1114/Screenshot%202022-12-03%20at%204.48.35%20AM.png" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="220" src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEi8ky9nTM8bwdo9zj71ugoGMTADn4brscR1CXFf0UOZbW_rK_8vX0rioxAVk_eEqimaSMFmR0p6KrX6wFp67v9BnhbBcrSpZMXBhWFN6SMGFLCvD6u1t7KlmGG3uNgR6hyeNg49HT_0vdINlhiiMmW-jjqYPpwcuZ9kbhGBSOUUpKL4j0BAi0jGSxRW/s320/Screenshot%202022-12-03%20at%204.48.35%20AM.png" width="320" /></a></div><br /><div><br /></div><div><code><span face="Consolas, Courier, Apple SD 산돌고딕 Neo, -apple-system, Lucida Grande, Apple SD Gothic Neo, 맑은 고딕, Malgun Gothic, Segoe UI, 돋움, dotum, sans-serif"><b><br /></b></span></code></div></code></div>