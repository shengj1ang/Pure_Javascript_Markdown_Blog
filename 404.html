<head>
    <title>MarkDownBlog</title>
    <noscript><p><font size="5" face="arial" color="red">此网页需要Javascipt以运行<br>You should enable Javascript to work with this page.</font></p></noscript>
    <script src="https://cdn.jsdelivr.net/npm/showdown/dist/showdown.min.js"></script>	
    <!--<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>-->
</head>
<body>


</body>
<script>
    function getDomain(){
        var url = document.location.toString();
        var HttpOrHttps = url.split("//")[0];
        var domain = url.split("//")[1].split("/")[0];
        return(HttpOrHttps+"//"+domain+"/")
    }
    function getQueryVariable(variable)
    {
        /*
        url 实例：
        https://www.runoob.com/index.php?id=1&image=awesome.jpg
        调用 getQueryVariable("id") 返回 1。
        调用 getQueryVariable("image") 返回 "awesome.jpg"。
        */
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable){return pair[1];}
        }
        return(false);
    }
    function LoadHTML(markdown_text){
        var htmlpage = new showdown.Converter(),
        //text      = '# hello, markdown!',
        text      = markdown_text,
        html      = htmlpage.makeHtml(text);
        document.querySelector('body').innerHTML = html;

        //document.getElementById('passage').innerHTML= htmlpage;

        //var name = 'leo';
        //var htmlStr = `<div><span>${name}</span></div>`
        }

    let xhr = new XMLHttpRequest();
    var md_url = getDomain()+"passages/"+getQueryVariable("passage_name")+".md";
    xhr.open("get", md_url, true);
    xhr.onload = function () {
        if (this.status == 200) {
          // if (callback) {
          // callback();
          console.log(this.response)
          LoadHTML(this.response)
          //const reader = new FileReader()
          //reader.onload = function () {
          //  console.log('reader.result', reader.result)
          //}
          //reader.readAsText(this.response);
        }
      };
      xhr.send();
    
    
   
</script>
</html>